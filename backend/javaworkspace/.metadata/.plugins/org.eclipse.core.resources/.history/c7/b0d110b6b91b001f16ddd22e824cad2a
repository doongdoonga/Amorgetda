package org.Amorgetda.day06.array.sort;

import java.util.Random;
import java.util.Scanner;

public class Test {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        Random random = new Random();

        System.out.println("게임에 오신 것을 환영합니다!");
        System.out.println("칼(1)과 활(2) 중 하나를 선택하세요:");

        int weaponChoice = scanner.nextInt();
        String weapon;

        if (weaponChoice == 1) {
            weapon = "칼";
        } else if (weaponChoice == 2) {
            weapon = "활";
        } else {
            System.out.println("잘못된 선택입니다. 기본 무기인 칼을 선택합니다.");
            weapon = "칼";
        }

        System.out.println("당신은 " + weapon + "을(를) 선택했습니다.");

        // 고블린과 전투 시작
        System.out.println("고블린이 나타났습니다!");
        System.out.println("전투를 시작합니다...");

        // 전투 로직
        int playerHits = 0;
        int goblinHits = 0;
        int playerGold = 0; // 플레이어의 소지금 변수

        while (playerHits < 3 && goblinHits < 3) {
            System.out.println("공격(1), 방어(2), 회복(3)을 선택하세요:");
            int playerAction = scanner.nextInt();

            // 고블린 행동
            int goblinAction = random.nextInt(2); // 0: 공격, 1: 방어

            // 플레이어 행동 처리
            if (playerAction == 1) {
                // 플레이어 공격
                if (goblinAction != 1) { // 고블린이 방어하지 않은 경우에만 데미지를 입힘
                    goblinHits++;
                    System.out.println("고블린을 공격하여 데미지를 입혔습니다.");
                } else {
                    System.out.println("고블린이 방어하여 공격을 막았습니다.");
                }
            } else if (playerAction == 2) {
                // 플레이어 방어
                System.out.println("방어 자세를 취했습니다.");
            } else if (playerAction == 3) {
                // 플레이어 회복
                System.out.println("회복하여 체력을 조금 회복했습니다.");
            } else {
                System.out.println("잘못된 선택입니다. 아무 일도 일어나지 않았습니다.");
            }

            // 고블린 행동 처리
            if (goblinAction == 0) {
                // 고블린 공격
                if (playerAction != 2) { // 플레이어가 방어하지 않은 경우에만 데미지를 입음
                    playerHits++;
                    System.out.println("고블린이 당신을 공격하여 데미지를 입혔습니다.");
                } else {
                    System.out.println("당신이 방어하여 고블린의 공격을 막았습니다.");
                }
            } else if (goblinAction == 1) {
                // 고블린 방어
                System.out.println("고블린이 방어 자세를 취했습니다.");
            }

            System.out.println("현재 당신이 받은 공격 횟수: " + playerHits + " / 3");
            System.out.println("현재 고블린이 받은 공격 횟수: " + goblinHits + " / 3");
        }

        if (goblinHits >= 3) {
            playerGold += 10; // 고블린을 물리치면 10G를 획득
            System.out.println("고블린을 물리쳤습니다!");
            System.out.println("10G를 획득했습니다. 현재 소지금: " + playerGold + "G");
        } else {
            System.out.println("패배했습니다. 게임 오버.");
        }

        scanner.close();
    }
}

